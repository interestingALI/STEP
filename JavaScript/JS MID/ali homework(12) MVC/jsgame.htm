<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS GAME MVC</title>
</head>
<body>
    <div id="game"></div>

    <script>
        let game = {
            width: 800,
            height: 600,
            color: "white",
            show: function () {
                this.elem = document.getElementById("game");
                this.elem.style.width =  this.width + "px";
                this.elem.style.height =  this.height + "px";
                this.elem.style.background = this.color;
                this.elem.style.margin = "auto";
                this.elem.style.boxShadow = "0 0 10px gray";
                this.elem.style.position = "relative";
            }
        }
        let ball = {
            radius: 20,
            color: "red",
            x: 0,
            y: 0,
            dx: 5,
            dy: 5,
            create: function () {
                game.elem.innerHTML += '<div id="ball"></div>';
            },
            show: function(){
                this.width = 2 * this.radius,
                this.height = 2 * this.radius,
                this.elem = document.getElementById("ball");
                this.elem.style.width = this.width + "px"
                this.elem.style.height = this.height + "px"
                this.elem.style.background = "radial-gradient(closest-side at 30% 30%, white, " + this.color + ")";
                this.elem.style.borderRadius = this.width / 2 + "px";
                this.elem.style.position = "absolute";
                this.elem.style.left = this.x + "px";
                this.elem.style.top = this.y + "px";
            },
            move: function () {
                if(ball.x < 0 || ball.x >= game.width - ball.width) ball.dx *= -1;
                if(ball.y < 0 || ball.y >= bar.y - ball.height && collision()) ball.dy *= -1;
                if(ball.y >= game.height - ball.height) gameOver();
                ball.x += ball.dx;
                ball.y += ball.dy;
                ball.show();
            }
        }
        let bar = {
            width: 150,
            height: 10,
            color: "blue",
            x: 0,
            dx: 10,
            create: function () {
                game.elem.innerHTML += '<div id="bar"></div>';
            },
            show: function () {
                this.y = game.height - this.height - 10;
                this.elem = document.getElementById("bar");
                this.elem.style.width = this.width + "px";
                this.elem.style.height = this.height + "px";
                this.elem.style.background = this.color;
                this.elem.style.position = "absolute";
                this.elem.style.left = this.x + "px";
                this.elem.style.top = this.y + "px";
            },
            move: function (code) {
                if(code == 37 && bar.x > 0) bar.x -= bar.dx;
                if(code == 39 && bar.x < game.width - bar.width) bar.x += bar.dx;
                bar.show();
            }
        }

        init();
        game.show();
        ball.create();
        bar.create();
        bar.show();

        let start = setInterval(ball.move, 40);

        document.onkeydown = function (e) { bar.move(e.keyCode) };

        function collision() {
            return (ball.x > bar.x - ball.radius && ball.x < bar.x + bar.width - ball.radius);
        }

        function gameOver() {
            clearInterval(start);
            game.elem.style.background = "#000";
            alert("GAME OVER !!!");
        }

        function init() {
            let body = document.getElementsByTagName("body")[0];
            body.style.height = "100vh";
            body.style.margin = "0";
            body.style = "flex";
        }
    </script>
</body>
</html>